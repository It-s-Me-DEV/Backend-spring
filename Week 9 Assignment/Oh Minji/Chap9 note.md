## 토큰 기반 인증

: 서버가 토큰을 생성해서 클라이언트에세 할당해주면 클라이언트가 토큰을 갖고 있다가 서버에 인증이 필요한 요청을 보낼 때마다 토큰을 함께 전송함. 서버는 토큰을 보고 유효한 사용자인지 판단하여 요청을 처리함.

### 특징

1. 무상태성: 클라이언트가 토큰을 갖고 있으므로 서버에서 데이터를 유지하기 위한 자원 소비가 줄어듦. 효율적인 검증이 가능해짐.

2. 확장성: 서버를 확장할 때 상태관리가 필요없으니 확장에 용이해짐.

   - 세션 인증 시 각각의 서버의 API에서 인증을 해야되는 것과 달리 토큰 기반 인증 시 하나의 토큰을 사용하여 여러개의 서버에 요청을 보낼 수 있음.
  
   - 토큰 기반으로 인증하는 다른 시스템에 로그인 시에 로그인 방식을 확장시킬 수 있음.

3. 무결성: 토큰 발급 이후에는 토큰 변경이 일어나지 않음.

## JWT

: HTTP 요청 헤더 중에 Authorization 키값에 **Bearer + JWT 토큰값**을 넣어 보냄

1. 구조: 헤더.내용.서명

- 헤더: 토큰의 타입(typ)과 해싱 알고리즘(alg)을 지정하는 정보를 담음.
  
- 내용: 토큰과 관련된 정보를 담음. 토큰에 대한 정보는 등록된 클레임, 공개되어도 상관없는 클레임(url)은 공개클레임, 공개되면 안되는 서버와 클라이언트 간 통신에 사용되는 클레임은 비공개클레임이라고 함.

- 서명: 토큰이 조작되거나 변경되지 않음을 확인하는 용도로 사용. 헤더의 인코딩값과 내용의 인코딩값을 합친 후에 비밀키를 사용해 해시값을 생성함.

2. 유효기간
   
엑세스 토큰: 사용자를 인증하기 위한 용도. 유효기간을 짧게 하여 토큰이 노출되어 얻는 피해를 최소화 함.

리프레스 토큰: 엑세스 토큰이 만료되었을 때 새로운 엑세스 토큰을 발급하기 위한 용도. 유효기간을 길게 하여 사용자의 사용성에 방해가 되지 않도록 함.

-> 결국 공격자가 엑세스 토큰을 탈취해도 몇 분 뒤에는 사용할 수 없는 토큰이 되므로 더 안전함.
